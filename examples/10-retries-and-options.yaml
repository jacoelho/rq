# Test with retries on a flaky endpoint
- method: GET
  url: http://localhost:8080/status/503
  options:
    retries: 3
    follow_redirect: false
  asserts:
    status:
      - op: equals
        value: 503

# Test redirect following
- method: GET
  url: http://localhost:8080/redirect-to?url=http://localhost:8080/get
  options:
    follow_redirect: true
  asserts:
    status:
      - op: equals
        value: 200
    jsonpath:
      - path: $.url
        op: equals
        value: "http://localhost:8080/get"

# Test without following redirects
- method: GET
  url: http://localhost:8080/redirect-to?url=http://localhost:8080/get
  options:
    follow_redirect: false
  asserts:
    status:
      - op: equals
        value: 302

# Test absolute redirect
- method: GET
  url: http://localhost:8080/absolute-redirect/2
  options:
    follow_redirect: true
  asserts:
    status:
      - op: equals
        value: 200

# Test relative redirect
- method: GET
  url: http://localhost:8080/relative-redirect/1
  options:
    follow_redirect: true
  asserts:
    status:
      - op: equals
        value: 200 